<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Keranjang Belanja - Plastiqu.Co</title>
    <link rel="shortcut icon" href="/assets/circle.png" type="image/png">
    <link rel="stylesheet" href="/components/header.css">
    <link rel="stylesheet" href="/components/footer.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Signika:wght@300..700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
<<<<<<< HEAD
        .cart-container { margin-top: 40px; }
        .cart-item { margin-bottom: 20px; }
        .item-image { width: 100px; height: auto; }
        .item-details { flex-grow: 1; }
        .item-price { color: #449bab; font-weight: bold; }
        .btn-delete { background-color: transparent; border: none; color: red; cursor: pointer; }
=======
        body {
            font-family: 'Signika', sans-serif;
            background-color: #f8f9fa;
            color: black;
        }

        .section-background {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
        }

        .cart-item {
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-bottom: 15px;
            padding: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .cart-item img {
            max-width: 80px;
            margin-right: 15px;
        }

        .cart-item-details {
            flex-grow: 1;
            margin-right: 10px;
        }

        .cart-item-price {
            font-size: 1.2rem;
            font-weight: bold;
            color: #449bab;
        }

        .total-price {
            font-size: 1.5rem;
            font-weight: bold;
            color: #033043;
            text-align: right;
        }

        .btn-checkout {
            width: 100%;
            padding: 10px;
            background-color: #449bab;
            color: white;
            font-size: 1.2rem;
        }

        .cart-item input[type="checkbox"] {
            margin-right: 15px;
        }

        .quantity-control {
            display: flex;
            align-items: center;
        }

        .quantity-control button {
            border: none;
            background-color: transparent;
            cursor: pointer;
        }

        .quantity-control input {
            width: 50px;
            text-align: center;
        }

        .quantity-input {
            width: 30px;
            /* Mengatur lebar kotak input */
            text-align: center;
            /* Memusatkan teks dalam kotak input */
        }

        .cart-icon,
        .orders-icon,
        .help-icon {
            font-size: 24px;
            /* Ubah ukuran sesuai kebutuhan */
        }
>>>>>>> 1ae3b113b9ac67e6d31ffa0acf5565fcdb6c646c
    </style>
</head>

<body>
<<<<<<< HEAD
<!-- Navbar -->
<header>
    <!-- Navbar code (similar to your product detail page) -->
</header>

<div class="container cart-container">
    <h1>Keranjang Belanja</h1>
    <div id="cart-items" class="row"></div>
    <div id="cart-total" class="mt-4"></div>
    <button class="btn btn-success mt-3" onclick="proceedToCheckout()">Checkout</button>
</div>

<script>
    function displayCartItems() {
        const cart = JSON.parse(localStorage.getItem('cart')) || [];
        const cartItemsDiv = document.getElementById('cart-items');
        cartItemsDiv.innerHTML = '';

        let total = 0;

        cart.forEach(item => {
            const cartItemDiv = document.createElement('div');
            cartItemDiv.classList.add('col-md-4', 'cart-item', 'd-flex', 'align-items-center');

            cartItemDiv.innerHTML = `
                <img src="${item.image}" alt="${item.name}" class="item-image">
                <div class="item-details ms-3">
                    <h5>${item.name}</h5>
                    <p class="item-price">Rp ${item.price}</p>
                    <p>Jumlah: <input type="number" value="${item.quantity}" min="1" onchange="updateQuantity(${item.id}, this.value)"></p>
                    <button class="btn-delete" onclick="removeFromCart(${item.id})">Hapus</button>
                </div>
            `;

            cartItemsDiv.appendChild(cartItemDiv);
            total += parseInt(item.price.replace('Rp ', '').replace('.', '')) * item.quantity; // Hitung total harga
        });

        // Menampilkan total harga
        const totalDiv = document.getElementById('cart-total');
        totalDiv.innerHTML = `<h4>Total: Rp ${total.toLocaleString()}`; // Format total dengan pemisah ribuan
    }

    function updateQuantity(productId, quantity) {
        const cart = JSON.parse(localStorage.getItem('cart')) || [];
        const itemIndex = cart.findIndex(item => item.id === productId);

        if (itemIndex > -1) {
            cart[itemIndex].quantity = parseInt(quantity);
            localStorage.setItem('cart', JSON.stringify(cart));
            displayCartItems(); // Perbarui tampilan setelah mengubah jumlah
=======
    <!-- Navbar -->
    <header>
        <nav class="navbar navbar-expand-lg navbar-dark">
            <div class="container">
                <a class="navbar-brand" href="index.html">
                    <img src="/assets/logo.png" alt="Plastiqu.Co" height="50">
                    Plastiqu.Co
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="kategoriDropdown" role="button"
                                data-bs-toggle="dropdown" aria-expanded="false">
                                Kategori
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="kategoriDropdown">
                                <li><a class="dropdown-item" href="#">Plastik Makanan</a></li>
                                <li><a class="dropdown-item" href="#">Plastik Minuman</a></li>
                                <li><a class="dropdown-item" href="#">Kemasan Kertas</a></li>
                                <li><a class="dropdown-item" href="#">dan lain-lain</a></li>
                            </ul>
                        </li>
                    </ul>
                    <form class="d-flex mx-auto my-2 search-form">
                        <input class="form-control me-2 search-input" type="search" placeholder="Cari produk..."
                            aria-label="Search">
                        <button class="btn btn-warning" type="submit">
                            <i class="fa-solid fa-magnifying-glass"></i>
                        </button>
                    </form>
                    <a href="cart.html" class="cart-icon mx-2 position-relative">
                        <i class="fa-solid fa-shopping-cart"></i>
                        <span class="badge badge-pill bg-danger position-absolute top-0 start-100 translate-middle"
                            id="cart-count">0</span>
                    </a>

                    <a href="pesanan.html" class="orders-icon mx-2">
                        <i class="fa-solid fa-box"></i>
                    </a>

                    <a href="https://wa.me/+62887435359524" class="help-icon mx-2" title="Bantuan">
                        <i class="fa-solid fa-question-circle help-icon-black"></i>
                    </a>

                    <script>
                        // Fungsi untuk memperbarui angka di ikon keranjang
                        function updateCartIcon() {
                            let cartItemCount = localStorage.getItem('cartItemCount') || 0;
                            document.getElementById('cart-count').textContent = cartItemCount;
                        }

                        // Panggil fungsi ini setiap kali halaman dimuat
                        updateCartIcon();
                    </script>

                    <div class="dropdown">
                        <a href="#" class="profile-icon dropdown-toggle d-flex align-items-center mx-2"
                            id="profileDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fa-solid fa-circle-user"></i>
                            <span class="ms-2">Nama Pengguna</span>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
                            <li><a class="dropdown-item profile-edit" href="/profile"><i
                                        class="fa-solid fa-user-edit"></i> Ubah Profil</a></li>
                            <li><a class="dropdown-item logout" href="/logout"><i class="fa-solid fa-sign-out-alt"></i>
                                    Logout</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <div class="container section-background my-5">
        <h2>Keranjang Belanja</h2>
        <div class="d-flex justify-content-between align-items-center my-3">
            <div>
                <input type="checkbox" id="selectAll" onclick="toggleSelectAll()">
                <label for="selectAll">Pilih Semua</label>
            </div>
            <button class="btn btn-danger" onclick="removeSelectedItems()" title="Hapus yang Dipilih">
                <i class="fas fa-trash-alt"></i>
            </button>
        </div>
        <div id="cartItemsContainer"></div>
        <div class="total-price my-4">
            Total: <span id="totalPrice">Rp 0</span>
        </div>
        <button class="btn btn-checkout" onclick="proceedToCheckout()">Lanjutkan ke Pembayaran</button>
    </div>

    <script>
        let cart = JSON.parse(localStorage.getItem('cart')) || [];

        window.onload = function () {
            displayCartItems();
        }

        function displayCartItems() {
            const cartItemsContainer = document.getElementById('cartItemsContainer');
            const totalPriceDisplay = document.getElementById('totalPrice');

            let totalPrice = 0;

            if (cart.length === 0) {
                cartItemsContainer.innerHTML = '<p>Keranjang Anda kosong.</p>';
                totalPriceDisplay.innerText = `Rp 0`;
            } else {
                cartItemsContainer.innerHTML = '';
                cart.forEach((product, index) => {
                    const itemHTML = `
                    <div class="cart-item">
                        <input type="checkbox" class="product-checkbox" id="product-${index}" data-index="${index}" onchange="updateTotalPrice()">
                        <img src="${product.image}" alt="${product.name}">
                        <div class="cart-item-details">
                            <h5>${product.name}</h5>
                            <p>Harga: Rp ${product.price.toLocaleString()}</p>
                            <div class="quantity-control">
                                <button onclick="changeQuantity(${index}, -1)" class="btn btn-sm btn-outline-secondary">-</button>
                                <input type="number" id="quantity-${index}" class="quantity-input" value="${product.quantity}" min="1" onchange="updateQuantity(${index})">
                                <button onclick="changeQuantity(${index}, 1)" class="btn btn-sm btn-outline-secondary">+</button>
                                </div>
                                <p style="margin-top: 10px;">Jumlah: ${product.quantity}</p>
                            </div>
                            <p class="cart-item-price">Rp ${(product.price * product.quantity).toLocaleString()}</p>
                    </div>
                `;
                    cartItemsContainer.innerHTML += itemHTML;
                    totalPrice += product.price * product.quantity;
                });
                totalPriceDisplay.innerText = `Rp ${totalPrice.toLocaleString()}`;
            }
        }

        function changeQuantity(index, change) {
            const quantityInput = document.getElementById(`quantity-${index}`);
            let newQuantity = Math.max(1, parseInt(quantityInput.value) + change); // Menghindari jumlah negatif
            quantityInput.value = newQuantity;

            cart[index].quantity = newQuantity; // Update quantity di array cart
            localStorage.setItem('cart', JSON.stringify(cart)); // Simpan perubahan ke localStorage
            updateTotalPrice(); // Update total harga
        }


        function updateTotalPrice() {
            const totalPriceDisplay = document.getElementById('totalPrice');
            let totalPrice = 0;
            const checkboxes = document.querySelectorAll('.product-checkbox:checked');

            checkboxes.forEach((checkbox) => {
                const index = checkbox.getAttribute('data-index');
                totalPrice += cart[index].price * cart[index].quantity;
            });

            totalPriceDisplay.innerText = `Rp ${totalPrice.toLocaleString()}`;
>>>>>>> 1ae3b113b9ac67e6d31ffa0acf5565fcdb6c646c
        }

<<<<<<< HEAD
    function removeFromCart(productId) {
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        cart = cart.filter(item => item.id !== productId);
        localStorage.setItem('cart', JSON.stringify(cart));
        displayCartItems(); // Perbarui tampilan setelah menghapus item
    }

    function proceedToCheckout() {
        const cart = JSON.parse(localStorage.getItem('cart')) || [];
        if (cart.length > 0) {
            localStorage.setItem('checkoutData', JSON.stringify(cart)); // Simpan data ke localStorage
            window.location.href = 'checkout.html'; // Ubah sesuai kebutuhan
        } else {
            alert("Keranjang belanja kosong!");
        }
    }

    document.addEventListener('DOMContentLoaded', displayCartItems);
</script>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
=======
        function removeSelectedItems() {
            const selectedCheckboxes = document.querySelectorAll('.product-checkbox:checked');

            selectedCheckboxes.forEach((checkbox) => {
                const index = checkbox.getAttribute('data-index');
                cart.splice(index, 1);
            });

            // Update localStorage
            localStorage.setItem('cart', JSON.stringify(cart));

            // Update index pada checkbox
            displayCartItems();
        }

        function toggleSelectAll() {
            const selectAllCheckbox = document.getElementById('selectAll');
            const productCheckboxes = document.querySelectorAll('.product-checkbox');

            productCheckboxes.forEach((checkbox) => {
                checkbox.checked = selectAllCheckbox.checked;
            });

            updateTotalPrice();
        }

        function proceedToCheckout() {
            // Membuat array untuk menyimpan item yang dipilih
            const selectedItems = [];

            // Mendapatkan semua checkbox produk yang terpilih
            const checkboxes = document.querySelectorAll('.product-checkbox:checked');

            // Menambahkan item yang dipilih ke array selectedItems
            checkboxes.forEach((checkbox) => {
                const index = checkbox.getAttribute('data-index');
                selectedItems.push(cart[index]); // Menyimpan item yang dipilih
            });

            // Simpan selectedItems ke localStorage atau tempat lain yang sesuai
            localStorage.setItem('selectedCartItems', JSON.stringify(selectedItems));

            // Arahkan pengguna ke halaman checkout
            window.location.href = 'checkout.html';
        }

        function addToCart(product) {
            const cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
            const existingItemIndex = cartItems.findIndex(item => item.id === product.id);

            if (existingItemIndex > -1) {
                // Update jumlah jika item sudah ada
                cartItems[existingItemIndex].quantity += product.quantity;
            } else {
                // Tambahkan item baru
                cartItems.push(product);
            }

            localStorage.setItem('cartItems', JSON.stringify(cartItems));
        }
    </script>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p class="text-center">Â© 2024 Plastiqu.Co. All rights reserved.</p>
        </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
>>>>>>> 1ae3b113b9ac67e6d31ffa0acf5565fcdb6c646c
</body>

</html>